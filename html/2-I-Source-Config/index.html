
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>1. Source Configuration &#8212; Analytic Engineering &amp; dbt: 0-100</title>
    
  <link rel="stylesheet" href="../_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.bfb7730f9caf2ec0b46a44615585038c.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.30270b6e4c972e43c488.js">

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/togglebutton.js"></script>
    <script type="text/javascript" src="../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript">var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script type="text/javascript" src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" type="text/javascript" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script type="text/javascript">
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" type="text/javascript" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Instantiate your Base Tables!" href="../2-II-Instantiate-Base-Tables/index.html" />
    <link rel="prev" title="1. Creating a Project" href="../1-Create-A-Project/index.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  
  <h1 class="site-logo" id="site-title">Analytic Engineering & dbt: 0-100</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../README.html">
   Analytic Engineering &amp; dbt: 0-100
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Installation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../0-Installation/index.html">
   1. Installation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Creating a Project
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../1-Create-A-Project/index.html">
   1. Creating a Project
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Base/Raw Extraction
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   1. Source Configuration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../2-II-Instantiate-Base-Tables/index.html">
   2. Instantiate your Base Tables!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../2-III-Materialization-Development/index.html">
   3. Development in BASE
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Staging Transformations
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../3-Model-Stage-Tables/index.html">
   Get up to the Stage
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Mart Reporting
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../4-Model-Mart-Tables/index.html">
   1. What are the Facts?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../4-Model-Mart-Tables/index.html#dimension-and-fact-tables">
   2. Dimension and Fact Tables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../4-Model-Mart-Tables/index.html#embedding-business-logic">
   3. Embedding Business Logic
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Documentation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../5-Documentation/index.html">
   1. Documention
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Additional Content
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../6-Advanced-Tests/index.html">
   1. Testing, Testingâ€¦
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../7-Advanced-Templates/index.html">
   2. Templating &amp; Macros
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Next Steps
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Thank-You/index.html">
   1. Next Steps!
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/2-I-Source-Config/index.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/CloudChaoszero/dbtOfCourse"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/CloudChaoszero/dbtOfCourse/issues/new?title=Issue%20on%20page%20%2F2-I-Source-Config/index.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   1.1. Introduction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-should-i-care">
     1.1.1. Why should I Care?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#my-thoughts">
       1.1.1.1. My thoughts
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quoting-dbt-docs">
       1.1.1.2. Quoting dbt Docs:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-sources">
   1.2. Using Sources
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tips">
   1.3. Tips
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#errors">
     1.3.1. Errors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-questions">
   1.4. Other Questions
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="source-configuration">
<h1>1. Source Configuration<a class="headerlink" href="#source-configuration" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="introduction">
<h2>1.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">Â¶</a></h2>
<p>This may seem optional, but I we start our model implementation by specifying our data source configuratins in a <code class="docutils literal notranslate"><span class="pre">.yml</span></code> file, coinciding with our model directory.</p>
<p>This is great for long-term reference &amp; configurations.</p>
<div class="section" id="why-should-i-care">
<h3>1.1.1. Why should I Care?<a class="headerlink" href="#why-should-i-care" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="my-thoughts">
<h4>1.1.1.1. My thoughts<a class="headerlink" href="#my-thoughts" title="Permalink to this headline">Â¶</a></h4>
<p>Well, there are cases where you have a reference to table <code class="docutils literal notranslate"><span class="pre">&quot;CuteDB&quot;.&quot;NiceSchema&quot;.&quot;Customers&quot;</span></code> in several locations of your Data model. However, what happense when you migrate to a new databse due to poor naming conventions from <code class="docutils literal notranslate"><span class="pre">&quot;CuteDB&quot;.&quot;NiceSchema&quot;.&quot;Customers&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;AwesomeDB&quot;.&quot;NiceSchema&quot;.&quot;Customers&quot;</span></code>.</p>
<p>You can do a mass replacement in your repository, depending on your Code editor. Or, you can make the changes all in one data reference
Before starting our model,</p>
</div>
<div class="section" id="quoting-dbt-docs">
<h4>1.1.1.2. Quoting dbt Docs:<a class="headerlink" href="#quoting-dbt-docs" title="Permalink to this headline">Â¶</a></h4>
<p>Sources make it possible to name and describe the data loaded into your warehouse by your Extract and Load tools. By declaring these tables as sources in dbt, you can then</p>
<ul class="simple">
<li><p>Use {{ source() }} function, helping define the lineage of your data</p></li>
<li><p>Test your assumptions about your source data</p></li>
<li><p>Calculate the freshness of your source data</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="using-sources">
<h2>1.2. Using Sources<a class="headerlink" href="#using-sources" title="Permalink to this headline">Â¶</a></h2>
<p>We configure our yml file for specifying source table references, in our upcoming modeling.
This includes:</p>
<ul class="simple">
<li><p>Snowflake specific table references</p></li>
<li><p>aliases</p></li>
</ul>
<blockquote>
<div><p>Note: We can add more to this file, like built-in test &amp; documentation functionality, but weâ€™ll cover that in a later topic</p>
</div></blockquote>
<p>Now, letâ€™s see how we can <a class="reference external" href="https://docs.getdbt.com/docs/building-a-dbt-project/using-sources/">use Sources</a> to specify our <a class="reference external" href="https://docs.getdbt.com/reference/project-configs/source-paths/">source path configurations</a></p>
<p>Here is a snippet of what I implemented. Everything in comments will be in #â€™s</p>
<p><img alt="Sources Configuration" src="https://media.giphy.com/media/znj7WeVBgyRh1c7pO3/giphy.gif" /></p>
<p>Hereâ€™s a snippet of what we implement for our source configuration</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>version: 2

sources:
  - name: customers # Customer alias for our table references in {{ source() }}
    database: SNOWFLAKE_SAMPLE_DATA
    schema: TPCDS_SF100TCL
    loaded_at_field: _loaded_at
    tables:
      - name: CUSTOMER
      - name: CUSTOMER_DEMOGRAPHICS
      - name: CATALOG_SALES
</pre></div>
</div>
</div>
<div class="section" id="tips">
<h2>1.3. Tips<a class="headerlink" href="#tips" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="errors">
<h3>1.3.1. Errors<a class="headerlink" href="#errors" title="Permalink to this headline">Â¶</a></h3>
<p>Why do I receive an error:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">selector</span> <span class="pre">'snowflake_demo_catalog_sales'</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">match</span> <span class="pre">any</span> <span class="pre">nodes</span> <span class="pre">and</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">ignored</span></code>?</p>
<ul>
<li><p>Ans: This is because either our profiles.yml file does not have the right configuration, or our models have not been explicitly mentiones</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p>Try out a prefix of <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">--warn-error</span> <span class="pre">run</span> </code> in your dbt run (Available in 0.17+)</p>
</div></blockquote>
</div>
</div>
<div class="section" id="other-questions">
<h2>1.4. Other Questions<a class="headerlink" href="#other-questions" title="Permalink to this headline">Â¶</a></h2>
<ul>
<li><p>Why is my schema like <code class="docutils literal notranslate"><span class="pre">dev_{name}_tablename</span></code>?</p>
<ul class="simple">
<li><p>Recall our created profiles.yml file. We specified our default target to be <code class="docutils literal notranslate"><span class="pre">dev</span></code>. In the <code class="docutils literal notranslate"><span class="pre">dev</span></code> configuration, we specify our table &amp; view creation under a prefix <code class="docutils literal notranslate"><span class="pre">dev_{name}</span></code></p></li>
</ul>
<blockquote>
<div><p>E.g. I had <code class="docutils literal notranslate"><span class="pre">schema:</span> <span class="pre">dev_raulingaverage</span></code></p>
</div></blockquote>
</li>
<li><p>How does dbt know to find my tablename in the sources file?</p>
<ul class="simple">
<li><p>Ans: We have our alias <code class="docutils literal notranslate"><span class="pre">customer</span></code> equivalent to <code class="docutils literal notranslate"><span class="pre">{DATABASE}.{SCHEMA}</span></code></p></li>
</ul>
</li>
<li><p>How can it access such table reference?</p>
<ul class="simple">
<li><p>Ans: In this tutorial, I am running on <code class="docutils literal notranslate"><span class="pre">SYSADMIN</span></code> in Snowflake. However, in a production environment, you may have to coordinate with your Snowflake admin to provide permissions to your particular table reference :/</p></li>
</ul>
</li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dbtcourse"
        },
        kernelOptions: {
            kernelName: "dbtcourse",
            path: "./2-I-Source-Config"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dbtcourse'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../1-Create-A-Project/index.html" title="previous page">1. Creating a Project</a>
    <a class='right-next' id="next-link" href="../2-II-Instantiate-Base-Tables/index.html" title="next page">2. Instantiate your Base Tables!</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Raul Maldonado<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.30270b6e4c972e43c488.js"></script>


    
  </body>
</html>